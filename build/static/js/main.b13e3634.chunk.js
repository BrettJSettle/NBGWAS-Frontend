(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,a,t){e.exports=t(345)},143:function(e,a,t){},345:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),o=t.n(l),c=(t(143),t(27)),i=t(28),s=t(30),u=t(29),m=t(31),d=t(17),p=t(120),h=t.n(p),g=t(72),f=t.n(g),b=t(20),E=t.n(b),v=t(21),w=t.n(v),x=t(45),y=t.n(x),k=t(122),S=t.n(k),N=function(e){return{root:{display:"block"},card:{minWidth:275,maxWidth:"60%",padding:50,margin:"auto",marginTop:30,marginBottom:30},heading:{fontSize:"15px"},formControl:{display:"flex",margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit},button:{float:"right",margin:"0px 15px"},input:{display:"none"},grow:{flexGrow:1},networkView:{minHeight:"600px",border:"2px solid black"},buttonBar:{display:"block",paddingTop:"20px"}}},C={title:"NBGWAS Service",subheader:"The network-boosed GWAS package re-prioritizes significant single nucleotide polymorphisms (SNPs) to genes using network diffusion methods including random walk and heat diffusion.",github:"https://github.com/shfong/nbgwas",uploadType:"Choose source",uploadText:"Upload CSV File",uploadHelp:"or select a sample",uploadButtonText:"Upload Custom CSV File",ndexText:"Network UUID",goldStandardText:"Gold Standard (optional)",goldStandardHelp:"optional",topText:"Top N nodes to return",topHelp:"# of nodes to return",alphaText:"Alpha (default = 0.2)",alphaHelp:"Alpha parameter for ...",runText:"Run"},O=Object(d.withStyles)(N)(function(e){var a=e.classes,t=e.handleBack;return r.a.createElement("div",null,r.a.createElement(h.a,{position:"fixed"},r.a.createElement(f.a,null,t&&r.a.createElement(y.a,{className:a.menuButton,color:"inherit","aria-label":"Back",onClick:t},r.a.createElement(S.a,null)),r.a.createElement(E.a,{variant:"title",className:a.grow,color:"inherit"},"NBGWAS Service"),r.a.createElement(w.a,{href:C.github,color:"inherit"},"Github"))))}),P=t(123),T=t.n(P),j=t(124),B=t(47),R=t.n(B),F=t(74),U=t(129),A=t.n(U),H=t(130),D=t.n(H),W=t(24),I=t.n(W),V=t(49),q=t.n(V),G=t(131),z=t.n(G),J=t(48),L=t.n(J),_=t(19),M=t.n(_),$=t(73),K=t.n($),Q=t(32),X=t.n(Q),Y=t(125),Z=t.n(Y),ee=t(126),ae=t.n(ee),te=t(128),ne=t.n(te),re=t(127),le=t.n(re),oe=t(46),ce=t.n(oe);var ie=Object(d.withStyles)(N)(function(e){var a=e.classes,t=e.goldStandard,n=e.top,l=e.alpha,o=e.handleChange;return r.a.createElement(Z.a,null,r.a.createElement(ae.a,{expandIcon:r.a.createElement(le.a,null)},r.a.createElement(E.a,{className:a.heading},"Advanced Settings")),r.a.createElement(ne.a,{className:a.root},r.a.createElement(M.a,{className:a.formControl},r.a.createElement(I.a,{htmlFor:"gold-standard"}),r.a.createElement(X.a,{id:"gold-standard",label:C.goldStandardText,className:a.textField,value:t,onChange:o("goldStandard"),margin:"normal"}),r.a.createElement(ce.a,null,C.goldStandardHelp)),r.a.createElement(M.a,{className:a.formControl},r.a.createElement(I.a,{htmlFor:"top"}),r.a.createElement(X.a,{id:"top",label:C.topText,className:a.textField,value:n,onChange:o("top"),margin:"normal",type:"number"}),r.a.createElement(ce.a,null,C.topHelp)),r.a.createElement(M.a,{className:a.formControl},r.a.createElement(I.a,{htmlFor:"alpha"}),r.a.createElement(X.a,{name:"alpha",id:"alpha",label:C.alphaText,className:a.textField,value:l,onChange:o("alpha"),margin:"normal",inputProps:{step:.1,min:0,max:1},type:"number"}),r.a.createElement(ce.a,null,C.alphaHelp))))}),se=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).getSampleNetwork=function(){var e=Object(F.a)(R.a.mark(function e(a){var t,n;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="/samples/"+a,e.next=3,fetch(t).then(function(e){return e.blob()});case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}));return function(a){return e.apply(this,arguments)}}(),t.getNDExNetwork=function(){var e=Object(F.a)(R.a.mark(function e(a,t){var n,r,l,o,c;return R.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL(a),r=n.host,l=n.hash.substring(n.hash.lastIndexOf("/")+1),o="/getThreeColumn?server=".concat(r,"&uuid=").concat(l,"&column=").concat(t),e.next=6,fetch(o).then(function(e){return e.blob()});case 6:return c=e.sent,e.abrupt("return",c);case 8:case"end":return e.stop()}},e,this)}));return function(a,t){return e.apply(this,arguments)}}(),t.getNetwork=function(e){var a=t.state,n=a.customUpload,r=a.ndex,l=a.column;return"sampleA"===e?t.getSampleNetwork("3col_interactions260.csv"):"custom"===e?new Promise(function(e,a){e(n)}):"ndex"===e?t.getNDExNetwork(r,l):void 0},t.checkParameters=function(e){var a=t.state,n=a.top,r=a.goldStandard,l=a.column,o=a.uploadType;if(""===e.get("alpha")&&e.set("alpha",.2),e.set("seeds",["SEPT7"]),"bigim"===o)return e.set("column",l),void t.props.handleRun(e,r,n);t.getNetwork(o).then(function(a){e.set("network",a),t.props.handleRun(e,r,n)})},t.handleChange=function(e){return function(a){"customUpload"!==e?t.setState(Object(j.a)({},e,a.target.value)):1===a.target.files.length&&(console.log(a.target.files[0]),t.setState({customUpload:a.target.files[0]}))}},t.onSubmit=function(e){var a=new FormData(t.form);t.checkParameters(a)},t.state={uploadType:"sampleA",customUpload:null,ndex:"http://dev2.ndexbio.org/#/network/5f3a589b-e91e-11e8-ad43-0660b7976219",column:"weight",goldStandard:"",top:100,alpha:.2},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"pFileReader",value:function(e){return new Promise(function(a,t){var n=new FileReader;n.onload=a,n.readAsDataURL(e)})}},{key:"render",value:function(){var e=this,a=this.props.classes,t=this.state,n=t.uploadType,l=t.customUpload,o=t.ndex,c=t.column,i=t.goldStandard,s=t.top,u=t.alpha;return r.a.createElement(A.a,{className:a.card},r.a.createElement(D.a,{title:C.title,subheader:C.subheader}),r.a.createElement("form",{ref:function(a){e.form=a},id:"nbgwas_form"},r.a.createElement(M.a,{component:"fieldset",className:a.formControl},r.a.createElement(K.a,{component:"legend"},C.uploadType),r.a.createElement(z.a,{"aria-label":"Upload Type",id:"uploadType",className:a.group,value:this.state.uploadType,onChange:this.handleChange("uploadType")},r.a.createElement(L.a,{value:"sampleA",control:r.a.createElement(q.a,null),label:"Sample A"}),r.a.createElement(L.a,{value:"bigim",control:r.a.createElement(q.a,null),label:"Bigim"}),r.a.createElement(L.a,{value:"custom",control:r.a.createElement(q.a,null),label:"Custom"}),r.a.createElement(L.a,{value:"ndex",control:r.a.createElement(q.a,null),label:"NDEx UUID"}))),"custom"===n&&r.a.createElement(M.a,{className:a.formControl},r.a.createElement("input",{accept:"text/csv",className:a.input,id:"custom-upload",type:"file",onChange:this.handleChange("customUpload")}),r.a.createElement("label",{htmlFor:"custom-upload"},r.a.createElement(w.a,{variant:"contained",component:"span",style:{float:"none"},className:a.button},C.uploadButtonText),l&&r.a.createElement(E.a,{component:"p"},l.name," ",l.size,"b"))),"ndex"===n&&r.a.createElement(M.a,{className:a.formControl},r.a.createElement(I.a,{htmlFor:"ndex-entry"}),r.a.createElement(X.a,{required:!0,id:"ndex-entry",label:C.ndexText,className:a.textField,value:o,onChange:this.handleChange("ndex"),margin:"normal"})),"biggim"===n&&r.a.createElement(M.a,{className:a.formControl},r.a.createElement(I.a,{htmlFor:"bigim-column-entry"}),r.a.createElement(X.a,{required:!0,id:"bigim-column-entry",label:"Bigim Attribute",className:a.textField,value:c,onChange:this.handleChange("column"),margin:"normal"})),r.a.createElement(ie,{goldStandard:i,top:s,alpha:u,handleChange:this.handleChange}),r.a.createElement(M.a,{className:a.buttonBar},r.a.createElement(w.a,{variant:"contained",className:a.button,onClick:this.onSubmit},C.runText))))}}]),a}(n.Component),ue=Object(d.withStyles)(N)(se),me=t(38),de=t.n(me),pe=t(135),he=t.n(pe),ge=t(136),fe=t.n(ge),be=t(39),Ee=t.n(be),ve=t(132),we=t.n(ve),xe=t(137),ye=t.n(xe),ke=t(60),Se=t.n(ke),Ne=t(134),Ce=t.n(Ne),Oe=t(133),Pe=t.n(Oe);function Te(e,a,t){return a[t]<e[t]?-1:a[t]>e[t]?1:0}var je=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(t=Object(s.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).createSortHandler=function(e){return function(a){t.props.onRequestSort(a,e)}},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.order,n=a.orderBy;return r.a.createElement(we.a,null,r.a.createElement(Se.a,null,this.props.columns.map(function(a){return r.a.createElement(Ee.a,{key:a.id,numeric:a.numeric,padding:"name"===a.id?"none":"default",sortDirection:n===a.id&&t},r.a.createElement(Pe.a,{title:"Sort",placement:a.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(Ce.a,{active:n===a.id,direction:t,onClick:e.createSortHandler(a.id)},a.label)))},this)))}}]),a}(r.a.Component),Be=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleRequestSort=function(e,a){var n=a,r="desc";t.state.orderBy===a&&"desc"===t.state.order&&(r="asc"),t.setState({order:r,orderBy:n})},t.handleChangePage=function(e,a){t.setState({page:a})},t.handleChangeRowsPerPage=function(e){t.setState({rowsPerPage:e.target.value})},t.isSelected=function(e){return-1!==t.state.selected.indexOf(e)},t.state={order:"asc",orderBy:"name",page:0,rowsPerPage:15},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"componentWillUpdate",value:function(e){}},{key:"render",value:function(){var e=this,a=this.props,t=a.classes,n=a.data,l=a.columns,o=this.state,c=o.order,i=o.orderBy,s=o.rowsPerPage,u=o.page,m=s-Math.min(s,n.length-u*s);return r.a.createElement("div",null,r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(he.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(je,{columns:l,order:c,orderBy:i,onRequestSort:this.handleRequestSort}),r.a.createElement(fe.a,null,function(e,a){var t=e.map(function(e,a){return[e,a]});return t.sort(function(e,t){var n=a(e[0],t[0]);return 0!==n?n:e[1]-t[1]}),t.map(function(e){return e[0]})}(n,function(e,a){return"desc"===e?function(e,t){return Te(e,t,a)}:function(e,t){return-Te(e,t,a)}}(c,i)).slice(u*s,u*s+s).map(function(a){return r.a.createElement(Se.a,{hover:!0,onClick:function(t){return e.handleClick(t,a.id)},role:"checkbox",tabIndex:-1,key:a.id},e.props.columns.map(function(e){return e.numeric?r.a.createElement(Ee.a,{key:e.id,numeric:!0},a[e.id]):r.a.createElement(Ee.a,{key:e.id},a[e.id])}))}),m>0&&r.a.createElement(Se.a,{style:{height:49*m}},r.a.createElement(Ee.a,{colSpan:6}))))),r.a.createElement(ye.a,{rowsPerPageOptions:[15,25,50],component:"div",count:n.length,rowsPerPage:s,page:u,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),a}(r.a.Component),Re=Object(d.withStyles)(N)(Be);var Fe=Object(d.withStyles)(N)(function(e){var a=e.classes;return r.a.createElement("div",{className:a.networkView},"Network View Here")});var Ue=Object(d.withStyles)(N)(function(e){var a=e.classes,t=e.data,n=e.handleBack;return r.a.createElement(de.a,{className:a.card},r.a.createElement(Fe,{data:t}),r.a.createElement(Re,{data:t,columns:[{id:"id",numeric:!1,disablePadding:!0,label:"Name"},{id:"value",numeric:!0,disablePadding:!1,label:"Value"}]}),r.a.createElement("div",{className:a.buttonBar},r.a.createElement(w.a,{variant:"contained",style:{float:"none"},className:a.button,onClick:n},"Back"),r.a.createElement(w.a,{variant:"contained",className:a.button},"Export to CSV"),r.a.createElement(w.a,{variant:"contained",color:"primary",className:a.button},"View on NDEx")))}),Ae=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(s.a)(this,Object(u.a)(a).call(this,e))).handleRun=function(e,a,n){T.a.post("/nbgwas",e).then(function(e){var a=Object.keys(e.data).map(function(a){return{id:a,value:e.data[a]}});a=a.sort(t.compareResults).slice(0,n),t.setState({data:a})})},t.state={data:null},t}return Object(m.a)(a,e),Object(i.a)(a,[{key:"compareResults",value:function(e,a){return a.value-e.value}},{key:"clear",value:function(){this.setState({data:null})}},{key:"render",value:function(){var e=this,a=this.state.data;return r.a.createElement("div",null,r.a.createElement(O,{handleBack:null===a?null:function(){return e.clear()}}),r.a.createElement("div",{style:{paddingTop:"100px"}},null!==a?r.a.createElement(Ue,{handleBack:function(){return e.clear()},data:a}):r.a.createElement(ue,{handleRun:this.handleRun})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ae,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,2,1]]]);
//# sourceMappingURL=main.b13e3634.chunk.js.map